<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinguaLens Dashboard</title>
    <script src="https://js.puter.com/v2/"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated Background Particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: rgba(33, 150, 243, 0.4);
            border-radius: 50%;
            animation: float 20s infinite;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0) translateX(0) scale(1);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) translateX(50px) scale(1.5);
                opacity: 0;
            }
        }

        /* Header Section */
        .header {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            border: 3px solid #0D47A1;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            animation: slideDown 0.6s ease-out;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .header-title {
            font-size: 32px;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            letter-spacing: 2px;
            animation: fadeIn 0.8s ease-out 0.2s both;
            flex: 1;
            text-align: center;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 30px;
            transition: all 0.3s ease;
            animation: slideLeft 0.6s ease-out 0.3s both;
        }

        @keyframes slideLeft {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .user-profile:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .user-name {
            color: white;
            font-weight: 600;
            font-size: 16px;
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .user-profile:hover .user-avatar {
            transform: rotate(360deg);
        }

        /* Main Content */
        .main-content {
            padding: 60px 40px;
            position: relative;
            z-index: 1;
            max-width: 1600px;
            margin: 0 auto;
        }

        .content-header {
            text-align: center;
            margin-bottom: 60px;
            animation: fadeInUp 0.8s ease-out 0.6s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .content-title {
            font-size: 48px;
            font-weight: bold;
            color: #0D47A1;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
            display: inline-block;
        }

        .content-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, #2196F3, #1976D2);
            border-radius: 2px;
        }

        .content-description {
            font-size: 18px;
            color: #1565C0;
            font-weight: 500;
            max-width: 900px;
            margin: 30px auto 0;
            line-height: 1.8;
            padding: 20px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        /* Section Headers */
        .section-header {
            font-size: 36px;
            font-weight: bold;
            color: #0D47A1;
            margin: 80px 0 40px;
            text-align: center;
            position: relative;
            animation: fadeInUp 0.8s ease-out;
        }

        .section-header::before {
            content: '';
            position: absolute;
            left: 50%;
            top: -20px;
            transform: translateX(-50%);
            width: 60px;
            height: 4px;
            background: linear-gradient(90deg, #2196F3, #1976D2);
            border-radius: 2px;
        }

        /* Feature Cards Grid */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 40px;
            margin-bottom: 60px;
        }

        .feature-card {
            background: white;
            border: 3px solid #2196F3;
            border-radius: 25px;
            padding: 45px 35px;
            text-align: center;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 10px 30px rgba(33, 150, 243, 0.2);
            position: relative;
            overflow: hidden;
            opacity: 0;
            animation: cardAppear 0.6s ease-out forwards;
            min-height: 320px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .feature-card:nth-child(1) { animation-delay: 0.7s; }
        .feature-card:nth-child(2) { animation-delay: 0.85s; }
        .feature-card:nth-child(3) { animation-delay: 1s; }
        .feature-card:nth-child(4) { animation-delay: 1.15s; }
        .feature-card:nth-child(5) { animation-delay: 1.3s; }
        .feature-card:nth-child(6) { animation-delay: 1.45s; }
        .feature-card:nth-child(7) { animation-delay: 1.6s; }

        @keyframes cardAppear {
            from {
                opacity: 0;
                transform: translateY(50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(33, 150, 243, 0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.6s ease;
        }

        .feature-card:hover::before {
            left: 100%;
        }

        .feature-card:hover {
            transform: translateY(-20px) scale(1.05);
            box-shadow: 0 25px 50px rgba(33, 150, 243, 0.4);
            border-color: #1976D2;
            background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%);
        }

        .feature-card:active {
            transform: translateY(-15px) scale(1.02);
        }

        .feature-icon {
            width: 130px;
            height: 130px;
            margin: 0 auto 30px;
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            border-radius: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            transition: all 0.5s ease;
            box-shadow: 0 10px 25px rgba(33, 150, 243, 0.3);
            position: relative;
        }

        .feature-card:hover .feature-icon {
            transform: rotateY(360deg) scale(1.15);
            box-shadow: 0 15px 40px rgba(33, 150, 243, 0.6);
        }

        .feature-icon::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 25px;
            background: inherit;
            filter: blur(25px);
            opacity: 0.5;
            z-index: -1;
        }

        .feature-title {
            font-size: 24px;
            font-weight: bold;
            color: #0D47A1;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .feature-card:hover .feature-title {
            color: #1976D2;
            transform: scale(1.08);
        }

        .feature-description {
            font-size: 15px;
            color: #546E7A;
            line-height: 1.7;
            transition: all 0.3s ease;
        }

        .feature-card:hover .feature-description {
            color: #37474F;
        }

        /* History/Leaderboard Cards - Different Style */
        .info-card {
            background: linear-gradient(135deg, #ffffff 0%, #f5f5f5 100%);
            border: 3px solid #42A5F5;
            border-radius: 25px;
            padding: 40px 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 8px 25px rgba(66, 165, 245, 0.2);
            position: relative;
            overflow: hidden;
            opacity: 0;
            animation: cardAppear 0.6s ease-out forwards;
            min-height: 280px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .info-card .feature-icon {
            width: 110px;
            height: 110px;
            background: linear-gradient(135deg, #42A5F5 0%, #1E88E5 100%);
            font-size: 50px;
        }

        .info-card:hover {
            transform: translateY(-15px) scale(1.03);
            box-shadow: 0 20px 40px rgba(66, 165, 245, 0.4);
            border-color: #1E88E5;
            background: linear-gradient(135deg, #E1F5FE 0%, #B3E5FC 100%);
        }

        /* Ripple Effect */
        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(33, 150, 243, 0.5);
            transform: scale(0);
            animation: ripple-effect 0.6s ease-out;
            pointer-events: none;
        }

        @keyframes ripple-effect {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        /* Floating Chat Button */
        #chat-toggle-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 32px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 25px rgba(33, 150, 243, 0.5);
            z-index: 1000;
            transition: all 0.3s ease;
            opacity: 0;
            animation: bounceIn 0.8s ease forwards;
            animation-delay: 1.8s;
        }

        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(0);
            }
            50% {
                transform: scale(1.2);
            }
            70% {
                transform: scale(0.9);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        #chat-toggle-btn:hover {
            transform: scale(1.15) rotate(15deg);
            box-shadow: 0 12px 35px rgba(33, 150, 243, 0.7);
        }

        #chat-toggle-btn:active {
            transform: scale(0.95);
        }

        #chat-toggle-btn::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: inherit;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.3);
                opacity: 0;
            }
        }

        /* Chat Window */
        #chatbox-container {
            position: fixed;
            bottom: 120px;
            right: 30px;
            width: 380px;
            height: 500px;
            background: white;
            border-radius: 25px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3);
            display: none;
            flex-direction: column;
            overflow: hidden;
            border: 3px solid #2196F3;
            z-index: 1000;
            transform-origin: bottom right;
        }

        #chatbox-container.open {
            display: flex;
            animation: chatboxOpen 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes chatboxOpen {
            from {
                opacity: 0;
                transform: scale(0.7) translateY(30px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        #chatbox-header {
            padding: 20px;
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            font-weight: bold;
            text-align: center;
            font-size: 18px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        #chatbox-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            font-size: 14px;
            background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 30%, #E3F2FD 100%);
        }

        #chatbox-messages::-webkit-scrollbar {
            width: 8px;
        }

        #chatbox-messages::-webkit-scrollbar-track {
            background: #E3F2FD;
            border-radius: 10px;
        }

        #chatbox-messages::-webkit-scrollbar-thumb {
            background: #2196F3;
            border-radius: 10px;
        }

        #chatbox-messages::-webkit-scrollbar-thumb:hover {
            background: #1976D2;
        }

        #chatbox-input {
            display: flex;
            border-top: 2px solid #E3F2FD;
            background: white;
        }

        #chatbox-input input {
            flex: 1;
            padding: 18px;
            border: none;
            outline: none;
            font-size: 15px;
            border-radius: 0 0 0 22px;
        }

        #chatbox-input button {
            width: 80px;
            border: none;
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            cursor: pointer;
            font-weight: 600;
            font-size: 15px;
            transition: all 0.3s ease;
            border-radius: 0 0 22px 0;
        }

        #chatbox-input button:hover {
            background: linear-gradient(135deg, #1976D2 0%, #0D47A1 100%);
        }

        #chatbox-input button:active {
            transform: scale(0.95);
        }

        /* Dropdown Menu */
        .dropdown-menu {
            position: absolute;
            top: 70px;
            right: 20px;
            background: white;
            border: 2px solid #2196F3;
            border-radius: 15px;
            padding: 10px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            display: none;
            z-index: 200;
            min-width: 200px;
            animation: dropdownSlide 0.3s ease;
        }

        @keyframes dropdownSlide {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .dropdown-menu.show {
            display: block;
        }

        .dropdown-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #0D47A1;
            font-weight: 500;
        }

        .dropdown-item:hover {
            background: #E3F2FD;
            padding-left: 25px;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .header-title {
                font-size: 24px;
            }

            .main-content {
                padding: 30px 20px;
            }

            .content-title {
                font-size: 32px;
            }

            .content-description {
                font-size: 16px;
            }

            .features-grid {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            #chatbox-container {
                width: 90%;
                right: 5%;
                left: 5%;
            }

            #chat-toggle-btn {
                width: 60px;
                height: 60px;
                font-size: 28px;
            }
        }
    </style>
</head>
<body>
    <!-- Animated Background Particles -->
    <div class="particles" id="particles"></div>

    <!-- Header -->
    <div class="header">
        <div class="header-title">LinguaLens</div>
        <div class="user-profile" id="userProfile">
            <span class="user-name" id="userName">NAME</span>
            <div class="user-avatar">üë§</div>
        </div>
    </div>

    <!-- Dropdown Menu -->
    <div class="dropdown-menu" id="dropdownMenu">
        <div class="dropdown-item" onclick="window.location.href='profile.html'">üë§ Edit Profile</div>
        <div class="dropdown-item" id="logoutBtn">üö™ Logout</div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="content-header">
            <h1 class="content-title">Welcome to LinguaLens</h1>
            <p class="content-description" id="welcome-text">
                Discover the power of advanced AI-driven language tools that transform the way you communicate, learn, and interact with the world. LinguaLens provides cutting-edge text extraction, real-time translation, natural speech synthesis, and engaging quiz features to help you break language barriers and enhance your multilingual journey. Whether you're a student, professional, or language enthusiast, our platform offers intuitive solutions designed for seamless communication and continuous learning.
            </p>
        </div>

        <!-- Core Features Section -->
        <h2 class="section-header">üöÄ Core Features</h2>
        <div class="features-grid">
            <!-- Text Extract -->
            <div class="feature-card" onclick="window.location.href='pictureToTextTranslator.html'">
                <div class="feature-icon">üì∏</div>
                <h3 class="feature-title">Text Extract</h3>
                <p class="feature-description">
                    Harness the power of advanced Optical Character Recognition (OCR) technology to extract text from images instantly. Perfect for digitizing documents, capturing handwritten notes, scanning receipts, or converting printed materials into editable digital text with remarkable accuracy.
                </p>
            </div>

            <!-- Text Translate -->
            <div class="feature-card" onclick="window.location.href='translator.html'">
                <div class="feature-icon">üåê</div>
                <h3 class="feature-title">Text Translate</h3>
                <p class="feature-description">
                    Experience seamless multilingual communication with our powerful translation engine. Translate text between dozens of languages with exceptional accuracy, preserving context and nuance. Ideal for international business, travel, education, and connecting with people worldwide.
                </p>
            </div>

            <!-- Text to Speech -->
            <div class="feature-card" onclick="window.location.href='txttospeechwt.html'">
                <div class="feature-icon">üîä</div>
                <h3 class="feature-title">Text to Speech</h3>
                <p class="feature-description">
                    Transform written content into natural-sounding speech with our advanced text-to-speech technology. Choose from multiple languages, voices, and accents. Perfect for accessibility, language learning, proofreading, or enjoying content hands-free while multitasking.
                </p>
            </div>

            <!-- Quiz -->
            <div class="feature-card" onclick="window.location.href='quiz.html'">
                <div class="feature-icon">üéØ</div>
                <h3 class="feature-title">Quiz</h3>
                <p class="feature-description">
                    Test your language skills and knowledge with interactive quizzes designed to challenge and educate. Track your progress, compete with others, and enhance your learning experience through gamified assessments covering vocabulary, grammar, translation, and cultural insights.
                </p>
            </div>
        </div>

        <!-- Progress & History Section -->
        <h2 class="section-header">üìä Progress & History</h2>
        <div class="features-grid">
            <!-- Leaderboards -->
            <div class="info-card" onclick="window.location.href='leaderboards.html'">
                <div class="feature-icon">üèÜ</div>
                <h3 class="feature-title">Leaderboards</h3>
                <p class="feature-description">
                    Compete with users worldwide and climb to the top of our global rankings. View real-time leaderboards, track your performance across different features, earn achievements, and see how you stack up against the LinguaLens community in various challenges and activities.
                </p>
            </div>

            <!-- Picture to Text History -->
            <div class="info-card" onclick="window.location.href='picturetotexthistory.html'">
                <div class="feature-icon">üìã</div>
                <h3 class="feature-title">Text Extract History</h3>
                <p class="feature-description">
                    Access complete text extraction history in one convenient location. Review previously extracted text from images, search through past conversions, re-use extracted content, and manage your OCR archive efficiently. Never lose important extracted information again.
                </p>
            </div>

            <!-- Text to Speech History -->
            <div class="info-card" onclick="window.location.href='txttospeechhistory.html'">
                <div class="feature-icon">üéôÔ∏è</div>
                <h3 class="feature-title">Text to Speech History</h3>
                <p class="feature-description">
                    Browse through your text-to-speech conversion history with ease. Replay previous audio generations, manage your speech synthesis archive, revisit favorite text conversions, and organize your audio library. Keep track of all your voice generation activities in one place.
                </p>
            </div>
        </div>
    </div>

    <!-- Floating Chat Button -->
    <button id="chat-toggle-btn">üí¨</button>

    <!-- Chat Window -->
    <div id="chatbox-container">
        <div id="chatbox-header">ü§ñ LinguaLens AI</div>
        <div id="chatbox-messages"></div>
        <div id="chatbox-input">
            <input type="text" id="userMessage" placeholder="Ask me anything..." />
            <button id="sendMessageBtn">Send</button>
        </div>
    </div>

    <script>
        // Generate animated particles
        const particlesContainer = document.getElementById('particles');
        for (let i = 0; i < 60; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 20 + 's';
            particle.style.animationDuration = (Math.random() * 15 + 15) + 's';
            particlesContainer.appendChild(particle);
        }

        // User profile dropdown
        const userProfile = document.getElementById('userProfile');
        const dropdownMenu = document.getElementById('dropdownMenu');

        userProfile.addEventListener('click', function(e) {
            e.stopPropagation();
            dropdownMenu.classList.toggle('show');
        });

        document.addEventListener('click', function() {
            dropdownMenu.classList.remove('show');
        });

        dropdownMenu.addEventListener('click', function(e) {
            e.stopPropagation();
        });

        // Ripple effect for cards
        document.querySelectorAll('.feature-card, .info-card').forEach(card => {
            card.addEventListener('click', function(e) {
                const rect = this.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                const ripple = document.createElement('span');
                ripple.className = 'ripple';
                ripple.style.left = x + 'px';
                ripple.style.top = y + 'px';
                
                this.appendChild(ripple);
                
                setTimeout(() => ripple.remove(), 600);
            });
        });

        // Chat toggle functionality
        const chatToggleBtn = document.getElementById('chat-toggle-btn');
        const chatboxContainer = document.getElementById('chatbox-container');
        
        chatToggleBtn.addEventListener('click', function() {
            if (chatboxContainer.classList.contains('open')) {
                chatboxContainer.classList.remove('open');
                setTimeout(() => {
                    chatboxContainer.style.display = 'none';
                }, 300);
                this.innerHTML = 'üí¨';
            } else {
                chatboxContainer.style.display = 'flex';
                setTimeout(() => {
                    chatboxContainer.classList.add('open');
                }, 10);
                this.innerHTML = '‚úñÔ∏è';
            }
        });

        // Chat functionality
        const sendMessageBtn = document.getElementById('sendMessageBtn');
        const userMessageInput = document.getElementById('userMessage');
        const chatboxMessages = document.getElementById('chatbox-messages');

        function addMessage(sender, message, isUser = false) {
            const msgWrapper = document.createElement('div');
            msgWrapper.style.display = 'flex';
            msgWrapper.style.marginBottom = '10px';
            msgWrapper.style.alignItems = 'flex-end';

            const msgBubble = document.createElement('div');
            msgBubble.textContent = message;
            msgBubble.style.padding = '10px 14px';
            msgBubble.style.borderRadius = '15px';
            msgBubble.style.maxWidth = '70%';
            msgBubble.style.fontSize = '14px';
            msgBubble.style.wordWrap = 'break-word';

            if (isUser) {
                msgWrapper.style.justifyContent = 'flex-end';
                msgBubble.style.backgroundColor = '#3498db';
                msgBubble.style.color = '#fff';
                msgBubble.style.borderBottomRightRadius = '3px';
            } else {
                msgWrapper.style.justifyContent = 'flex-start';

                const icon = document.createElement('img');
                icon.src = 'https://cdn-icons-png.flaticon.com/512/4712/4712109.png';
                icon.alt = 'AI';
                icon.style.width = '30px';
                icon.style.height = '30px';
                icon.style.marginRight = '8px';

                msgWrapper.appendChild(icon);

                msgBubble.style.backgroundColor = '#f1f1f1';
                msgBubble.style.color = '#000';
                msgBubble.style.borderBottomLeftRadius = '3px';
            }

            msgWrapper.appendChild(msgBubble);
            chatboxMessages.appendChild(msgWrapper);
            chatboxMessages.scrollTop = chatboxMessages.scrollHeight;
        }

        function addLoadingMessage() {
            const loadingMsg = document.createElement('div');
            loadingMsg.style.display = 'flex';
            loadingMsg.style.alignItems = 'center';
            loadingMsg.style.marginBottom = '10px';

            const text = document.createElement('span');
            text.textContent = 'AI: ';
            loadingMsg.appendChild(text);

            const dots = document.createElement('span');
            dots.textContent = '.';
            dots.style.marginLeft = '4px';
            loadingMsg.appendChild(dots);

            chatboxMessages.appendChild(loadingMsg);
            chatboxMessages.scrollTop = chatboxMessages.scrollHeight;

            let dotCount = 1;
            const interval = setInterval(() => {
                dotCount = (dotCount % 3) + 1;
                dots.textContent = '.'.repeat(dotCount);
            }, 400);

            return { loadingMsg, interval };
        }

        (async function autoAuth() {
            try {
                if (puter?.auth?.signInAnonymously) {
                    await puter.auth.signInAnonymously();
                } else if (puter?.auth?.anonymous) {
                    await puter.auth.anonymous();
                } else if (puter?.auth?.signIn) {
                    await puter.auth.signIn();
                } else {
                    console.error("No valid Puter auth method found.");
                }
                console.log("‚úÖ Auto signed-in");
            } catch (err) {
                console.error("Auth Error:", err);
            }
        })();

        sendMessageBtn.addEventListener('click', async () => {
            const message = userMessageInput.value.trim();
            if (!message) return;

            addMessage('You', message, true);
            userMessageInput.value = '';

            const { loadingMsg, interval } = addLoadingMessage();

            try {
                const aiReply = await puter.ai.chat(message);

                clearInterval(interval);
                chatboxMessages.removeChild(loadingMsg);
                addMessage('AI', aiReply || 'No response', false);
            } catch (error) {
                clearInterval(interval);
                chatboxMessages.removeChild(loadingMsg);
                console.error(error);
                addMessage('AI', 'Error connecting to AI service.', false);
            }
        });

        userMessageInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessageBtn.click();
            }
        });

        // Logout functionality
        const logoutBtn = document.getElementById('logoutBtn');

        function handleLogout() {
            console.log("Logging out...");
            
            const overlay = document.createElement('div');
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                animation: fadeIn 0.5s ease;
            `;
            
            const message = document.createElement('div');
            message.style.cssText = `
                color: white;
                font-size: 24px;
                font-weight: bold;
                text-align: center;
            `;
            message.innerHTML = 'Logging out...<br><div style="margin-top: 20px; width: 50px; height: 50px; border: 5px solid rgba(255,255,255,0.3); border-top-color: white; border-radius: 50%; animation: spin 1s linear infinite; margin: 20px auto 0;"></div>';
            
            overlay.appendChild(message);
            document.body.appendChild(overlay);
            
            setTimeout(() => {
                window.location.href = 'login.html';
            }, 1500);
        }

        logoutBtn.addEventListener('click', handleLogout);

        // Welcome text animation
        const welcomeText = document.getElementById('welcome-text');
        const welcomeMessages = [
            "Discover the power of advanced AI-driven language tools that transform the way you communicate, learn, and interact with the world. LinguaLens provides cutting-edge text extraction, real-time translation, natural speech synthesis, and engaging quiz features to help you break language barriers and enhance your multilingual journey. Whether you're a student, professional, or language enthusiast, our platform offers intuitive solutions designed for seamless communication and continuous learning.",
            "Break through language barriers with our comprehensive suite of AI-powered tools. From instant text extraction and accurate translations to natural speech synthesis and interactive quizzes, LinguaLens empowers you to communicate globally. Track your progress, compete on leaderboards, and access your complete usage history‚Äîall in one elegant, user-friendly platform designed for modern language learning and communication.",
            "Transform how you interact with languages using state-of-the-art artificial intelligence. LinguaLens combines powerful OCR technology, multilingual translation, voice synthesis, and gamified learning into a seamless experience. Perfect for students mastering new languages, professionals conducting international business, travelers exploring the world, or anyone passionate about breaking down communication barriers.",
            "Experience the future of language technology with LinguaLens. Our integrated platform offers everything you need for modern multilingual communication: extract text from any image, translate between dozens of languages, convert text to natural speech, test your skills with engaging quizzes, and track your journey with comprehensive history and leaderboards. Join thousands of users worldwide who trust LinguaLens for their language needs."
        ];
        
        let currentMessageIndex = 0;
        
        function changeWelcomeMessage() {
            welcomeText.style.transition = 'opacity 0.5s ease';
            welcomeText.style.opacity = 0;
            
            setTimeout(() => {
                currentMessageIndex = (currentMessageIndex + 1) % welcomeMessages.length;
                welcomeText.textContent = welcomeMessages[currentMessageIndex];
                welcomeText.style.opacity = 1;
            }, 500);
        }
        
        setInterval(changeWelcomeMessage, 8000);
    </script>
</body>
</html>